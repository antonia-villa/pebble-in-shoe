let resultData = {
  ParsedResults: [
    {
      TextOverlay: {
        Lines: [
          {
            Words: [
              {
                WordText: 'Cranbourt;e',
                Left: 117,
                Top: 0,
                Height: 24,
                Width: 104,
              },
              {
                WordText: 'Park',
                Left: 232,
                Top: 10,
                Height: 20,
                Width: 39,
              },
              {
                WordText: 'Shopping',
                Left: 280,
                Top: 9,
                Height: 24,
                Width: 85,
              },
              {
                WordText: 'Centre',
                Left: 376,
                Top: 12,
                Height: 23,
                Width: 61,
              },
              {
                WordText: 'H',
                Left: 448,
                Top: 6,
                Height: 17,
                Width: 9,
              },
              {
                WordText: 'g',
                Left: 468,
                Top: 9,
                Height: 15,
                Width: 11,
              },
            ],
            MaxHeight: 24,
            MinTop: 0,
          },
          {
            Words: [
              {
                WordText: 'CRANBOURNE',
                Left: 204,
                Top: 30,
                Height: 22,
                Width: 103,
              },
            ],
            MaxHeight: 22,
            MinTop: 30,
          },
          {
            Words: [
              {
                WordText: 'Served',
                Left: 120,
                Top: 45,
                Height: 21,
                Width: 63,
              },
              {
                WordText: 'by:',
                Left: 193,
                Top: 49,
                Height: 21,
                Width: 28,
              },
            ],
            MaxHeight: 21,
            MinTop: 45,
          },
          {
            Words: [
              {
                WordText: 'Term',
                Left: 193,
                Top: 72,
                Height: 19,
                Width: 41,
              },
            ],
            MaxHeight: 19,
            MinTop: 72,
          },
          {
            Words: [
              {
                WordText: 'TAx',
                Left: 266,
                Top: 123,
                Height: 16,
                Width: 29,
              },
              {
                WordText: 'INVOICE',
                Left: 309,
                Top: 124,
                Height: 19,
                Width: 71,
              },
            ],
            MaxHeight: 19,
            MinTop: 123,
          },
          {
            Words: [
              {
                WordText: 'ABN:',
                Left: 237,
                Top: 145,
                Height: 16,
                Width: 39,
              },
              {
                WordText: '47831255770',
                Left: 291,
                Top: 146,
                Height: 19,
                Width: 116,
              },
            ],
            MaxHeight: 19,
            MinTop: 145,
          },
          {
            Words: [
              {
                WordText: 'Qty',
                Left: 89,
                Top: 176,
                Height: 24,
                Width: 33,
              },
              {
                WordText: 'Size',
                Left: 134,
                Top: 180,
                Height: 23,
                Width: 43,
              },
              {
                WordText: 'Item',
                Left: 190,
                Top: 185,
                Height: 22,
                Width: 41,
              },
            ],
            MaxHeight: 24,
            MinTop: 176,
          },
          {
            Words: [
              {
                WordText: '1',
                Left: 111,
                Top: 230,
                Height: 18,
                Width: 5,
              },
              {
                WordText: '6',
                Left: 153,
                Top: 233,
                Height: 19,
                Width: 22,
              },
              {
                WordText: 'Egg',
                Left: 188,
                Top: 234,
                Height: 22,
                Width: 31,
              },
              {
                WordText: '&',
                Left: 231,
                Top: 239,
                Height: 18,
                Width: 9,
              },
              {
                WordText: 'Cheese',
                Left: 252,
                Top: 239,
                Height: 21,
                Width: 64,
              },
              {
                WordText: 'Bkfst',
                Left: 328,
                Top: 239,
                Height: 20,
                Width: 53,
              },
              {
                WordText: 'Sub',
                Left: 395,
                Top: 239,
                Height: 19,
                Width: 30,
              },
            ],
            MaxHeight: 22,
            MinTop: 230,
          },
          {
            Words: [
              {
                WordText: 'Bottled',
                Left: 186,
                Top: 259,
                Height: 25,
                Width: 76,
              },
              {
                WordText: 'Juice',
                Left: 274,
                Top: 266,
                Height: 20,
                Width: 53,
              },
            ],
            MaxHeight: 25,
            MinTop: 259,
          },
          {
            Words: [
              {
                WordText: 'Sub',
                Left: 82,
                Top: 305,
                Height: 19,
                Width: 34,
              },
              {
                WordText: 'Total',
                Left: 128,
                Top: 308,
                Height: 21,
                Width: 53,
              },
            ],
            MaxHeight: 21,
            MinTop: 305,
          },
          {
            Words: [
              {
                WordText: 'Taxable',
                Left: 82,
                Top: 330,
                Height: 23,
                Width: 78,
              },
              {
                WordText: 'Amount',
                Left: 172,
                Top: 336,
                Height: 23,
                Width: 66,
              },
            ],
            MaxHeight: 23,
            MinTop: 330,
          },
          {
            Words: [
              {
                WordText: '(10K)',
                Left: 128,
                Top: 358,
                Height: 24,
                Width: 52,
              },
            ],
            MaxHeight: 24,
            MinTop: 358,
          },
          {
            Words: [
              {
                WordText: 'Total',
                Left: 79,
                Top: 380,
                Height: 21,
                Width: 53,
              },
              {
                WordText: '(Eat',
                Left: 150,
                Top: 385,
                Height: 21,
                Width: 41,
              },
              {
                WordText: 'In)',
                Left: 205,
                Top: 389,
                Height: 21,
                Width: 30,
              },
            ],
            MaxHeight: 21,
            MinTop: 380,
          },
          {
            Words: [
              {
                WordText: 'Cash',
                Left: 75,
                Top: 406,
                Height: 21,
                Width: 47,
              },
            ],
            MaxHeight: 21,
            MinTop: 406,
          },
          {
            Words: [
              {
                WordText: 'Change',
                Left: 73,
                Top: 431,
                Height: 23,
                Width: 71,
              },
            ],
            MaxHeight: 23,
            MinTop: 431,
          },
          {
            Words: [
              {
                WordText: '*',
                Left: 72,
                Top: 460,
                Height: 15,
                Width: 11,
              },
              {
                WordText: 'Item(s)',
                Left: 96,
                Top: 458,
                Height: 25,
                Width: 80,
              },
              {
                WordText: 'non',
                Left: 191,
                Top: 468,
                Height: 16,
                Width: 33,
              },
              {
                WordText: 'taxed.',
                Left: 236,
                Top: 463,
                Height: 19,
                Width: 65,
              },
            ],
            MaxHeight: 25,
            MinTop: 458,
          },
          {
            Words: [
              {
                WordText: 'prfce',
                Left: 469,
                Top: 194,
                Height: 17,
                Width: 53,
              },
            ],
            MaxHeight: 17,
            MinTop: 194,
          },
          {
            Words: [
              {
                WordText: '$4.55',
                Left: 471,
                Top: 240,
                Height: 20,
                Width: 54,
              },
            ],
            MaxHeight: 20,
            MinTop: 240,
          },
          {
            Words: [
              {
                WordText: '$3.50*',
                Left: 459,
                Top: 265,
                Height: 21,
                Width: 66,
              },
            ],
            MaxHeight: 21,
            MinTop: 265,
          },
          {
            Words: [
              {
                WordText: '$7.64',
                Left: 460,
                Top: 316,
                Height: 21,
                Width: 56,
              },
            ],
            MaxHeight: 21,
            MinTop: 316,
          },
          {
            Words: [
              {
                WordText: '$4,',
                Left: 459,
                Top: 343,
                Height: 22,
                Width: 29,
              },
              {
                WordText: '14',
                Left: 494,
                Top: 342,
                Height: 22,
                Width: 21,
              },
            ],
            MaxHeight: 22,
            MinTop: 342,
          },
          {
            Words: [
              {
                WordText: '$8.05',
                Left: 460,
                Top: 394,
                Height: 21,
                Width: 55,
              },
            ],
            MaxHeight: 21,
            MinTop: 394,
          },
          {
            Words: [
              {
                WordText: '$20.00',
                Left: 449,
                Top: 419,
                Height: 20,
                Width: 66,
              },
            ],
            MaxHeight: 20,
            MinTop: 419,
          },
          {
            Words: [
              {
                WordText: '$11.95',
                Left: 451,
                Top: 443,
                Height: 20,
                Width: 67,
              },
            ],
            MaxHeight: 20,
            MinTop: 443,
          },
          {
            Words: [
              {
                WordText: 'believe',
                Left: 104,
                Top: 511,
                Height: 24,
                Width: 85,
              },
              {
                WordText: 'in',
                Left: 203,
                Top: 517,
                Height: 20,
                Width: 20,
              },
              {
                WordText: 'EQUALITY',
                Left: 235,
                Top: 515,
                Height: 24,
                Width: 92,
              },
              {
                WordText: 'for',
                Left: 338,
                Top: 518,
                Height: 22,
                Width: 34,
              },
              {
                WordText: 'ALL',
                Left: 385,
                Top: 519,
                Height: 21,
                Width: 33,
              },
            ],
            MaxHeight: 24,
            MinTop: 511,
          },
          {
            Words: [
              {
                WordText: 'Aust',
                Left: 69,
                Top: 541,
                Height: 21,
                Width: 47,
              },
              {
                WordText: 'fans.',
                Left: 155,
                Top: 541,
                Height: 21,
                Width: 53,
              },
            ],
            MaxHeight: 21,
            MinTop: 541,
          },
          {
            Words: [
              {
                WordText: 'What',
                Left: 63,
                Top: 595,
                Height: 23,
                Width: 48,
              },
              {
                WordText: 'about',
                Left: 125,
                Top: 596,
                Height: 22,
                Width: 59,
              },
              {
                WordText: 'you?',
                Left: 197,
                Top: 599,
                Height: 23,
                Width: 48,
              },
            ],
            MaxHeight: 23,
            MinTop: 595,
          },
          {
            Words: [
              {
                WordText: 'Vote',
                Left: 58,
                Top: 655,
                Height: 22,
                Width: 50,
              },
              {
                WordText: 'YES',
                Left: 123,
                Top: 654,
                Height: 24,
                Width: 59,
              },
              {
                WordText: 'in',
                Left: 199,
                Top: 656,
                Height: 23,
                Width: 20,
              },
              {
                WordText: 'the',
                Left: 232,
                Top: 656,
                Height: 23,
                Width: 35,
              },
              {
                WordText: 'Postal',
                Left: 279,
                Top: 657,
                Height: 23,
                Width: 66,
              },
              {
                WordText: 'Survey,',
                Left: 359,
                Top: 659,
                Height: 31,
                Width: 80,
              },
            ],
            MaxHeight: 31,
            MinTop: 654,
          },
          {
            Words: [
              {
                WordText: 'DO',
                Left: 51,
                Top: 715,
                Height: 23,
                Width: 27,
              },
              {
                WordText: 'it',
                Left: 93,
                Top: 715,
                Height: 24,
                Width: 23,
              },
              {
                WordText: 'because',
                Left: 129,
                Top: 715,
                Height: 24,
                Width: 87,
              },
              {
                WordText: "it's",
                Left: 231,
                Top: 715,
                Height: 24,
                Width: 46,
              },
              {
                WordText: 'the',
                Left: 289,
                Top: 716,
                Height: 24,
                Width: 34,
              },
              {
                WordText: 'right',
                Left: 337,
                Top: 717,
                Height: 26,
                Width: 56,
              },
              {
                WordText: 'thing',
                Left: 406,
                Top: 717,
                Height: 30,
                Width: 59,
              },
              {
                WordText: 'to',
                Left: 478,
                Top: 721,
                Height: 22,
                Width: 22,
              },
              {
                WordText: 'do.',
                Left: 513,
                Top: 721,
                Height: 23,
                Width: 33,
              },
            ],
            MaxHeight: 30,
            MinTop: 715,
          },
          {
            Words: [
              {
                WordText: 'Host',
                Left: 42,
                Top: 811,
                Height: 25,
                Width: 53,
              },
              {
                WordText: 'order',
                Left: 109,
                Top: 809,
                Height: 26,
                Width: 65,
              },
              {
                WordText: 'SPM20170904095å48',
                Left: 238,
                Top: 808,
                Height: 24,
                Width: 205,
              },
            ],
            MaxHeight: 26,
            MinTop: 808,
          },
          {
            Words: [
              {
                WordText: 'Get',
                Left: 38,
                Top: 877,
                Height: 24,
                Width: 39,
              },
              {
                WordText: 'a',
                Left: 92,
                Top: 882,
                Height: 19,
                Width: 13,
              },
              {
                WordText: 'FREE',
                Left: 120,
                Top: 874,
                Height: 25,
                Width: 52,
              },
              {
                WordText: 'cookie',
                Left: 186,
                Top: 872,
                Height: 25,
                Width: 77,
              },
              {
                WordText: 'Rhen',
                Left: 276,
                Top: 871,
                Height: 27,
                Width: 48,
              },
              {
                WordText: 'you',
                Left: 337,
                Top: 879,
                Height: 22,
                Width: 37,
              },
              {
                WordText: 'take',
                Left: 387,
                Top: 873,
                Height: 25,
                Width: 49,
              },
              {
                WordText: 'our',
                Left: 447,
                Top: 880,
                Height: 18,
                Width: 33,
              },
              {
                WordText: 'Tell',
                Left: 493,
                Top: 873,
                Height: 26,
                Width: 47,
              },
            ],
            MaxHeight: 27,
            MinTop: 871,
          },
          {
            Words: [
              {
                WordText: 'Subway',
                Left: 34,
                Top: 910,
                Height: 27,
                Width: 83,
              },
              {
                WordText: 'survey',
                Left: 130,
                Top: 911,
                Height: 23,
                Width: 81,
              },
              {
                WordText: 'within',
                Left: 225,
                Top: 904,
                Height: 28,
                Width: 75,
              },
              {
                WordText: 'the',
                Left: 314,
                Top: 905,
                Height: 27,
                Width: 35,
              },
              {
                WordText: 'next',
                Left: 363,
                Top: 907,
                Height: 24,
                Width: 49,
              },
              {
                WordText: '7',
                Left: 426,
                Top: 907,
                Height: 22,
                Width: 10,
              },
              {
                WordText: 'days',
                Left: 448,
                Top: 905,
                Height: 28,
                Width: 47,
              },
            ],
            MaxHeight: 28,
            MinTop: 904,
          },
          {
            Words: [
              {
                WordText: 'www.subway.com.au/tel',
                Left: 31,
                Top: 939,
                Height: 31,
                Width: 278,
              },
              {
                WordText: 'I',
                Left: 315,
                Top: 939,
                Height: 27,
                Width: 7,
              },
              {
                WordText: '-subway',
                Left: 327,
                Top: 939,
                Height: 30,
                Width: 88,
              },
            ],
            MaxHeight: 31,
            MinTop: 939,
          },
        ],
        HasOverlay: true,
        Message: 'Total lines: 33',
      },
      FileParseExitCode: 1,
      ErrorMessage: '',
      ErrorDetails: '',
    },
  ],
  OCRExitCode: 1,
  IsErroredOnProcessing: false,
  ErrorMessage: null,
  ErrorDetails: null,
  ProcessingTimeInMilliseconds: '910',
  SearchablePDFURL: 'Searchable PDF not generated as it was not requested.',
};

//Getting all prices from the api response
function getResultData(result) {
  let prices = [];
  let totals = [];
  let lines = result.ParsedResults[0].TextOverlay.Lines;
  for (let i = 0; i < lines.length; i++) {
    let words = lines[i].Words;
    for (let j = 0; j < words.length; j++) {
      if (words[j].WordText.toLowerCase().indexOf('total') !== -1) {
        totals.push(words[j]);
      } else if (
        words[j].WordText.indexOf('$') !== -1 &&
        words[j].WordText.length > 1
      ) {
        words[j].WordText = words[j].WordText.replace(/[^0-9.]/g, '');
        prices.push(words[j]);
      }
    }
  }
  return [prices, totals];
}
//finds which price is associated with the "Total";
function findToatalData(item, priceData) {
  let lowestDiff = [];
  let receiptItems = null;
  for (let i = 0; i < item.length; i++) {
    lowestDiff.push({
      diff: 999999, //default diff
      price: null,
      itemIndex: null, //which total in the "item" array contains the lowest diff
    });
    for (let j = 0; j < priceData.length; j++) {
      let diff = Math.abs(
        parseFloat(item[i].Top) - parseFloat(priceData[j].Top)
      );
      if (diff < lowestDiff[i].diff) {
        //set new lowest diff
        lowestDiff[i].diff = diff;
        lowestDiff[i].price = parseFloat(priceData[j].WordText);
        lowestDiff[i].itemIndex = i;
      }
    }
  }
  return Math.max.apply(Math, lowestDiff.map(function(o) { return o.price; }));;
}
let searchData = getResultData(resultData);
let priceData = searchData[0];
let totalLocation = findToatalData(searchData[1], priceData);
console.log(totalLocation);
